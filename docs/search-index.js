crystal_doc_search_index_callback({"repository_name":"scaleway-ddns","body":"# scaleway-ddns (v2.0.0)\n![GitHub Workflow Status (main)](https://github.com/d1ceward/scaleway-ddns/actions/workflows/main.yml/badge.svg?branch=master)\n[![Docker Pulls](https://img.shields.io/docker/pulls/d1ceward/scaleway-ddns.svg)](https://hub.docker.com/r/d1ceward/scaleway-ddns)\n[![GitHub issues](https://img.shields.io/github/issues/d1ceward/scaleway-ddns)](https://github.com/d1ceward/scaleway-ddns/issues)\n[![GitHub license](https://img.shields.io/github/license/d1ceward/scaleway-ddns)](https://github.com/d1ceward/scaleway-ddns/blob/master/LICENSE)\n\nSimple Scaleway dynamic DNS service by API written in Crystal.\n\n:rocket: Suggestions for new improvements are welcome in the issue tracker.\n\n## Installation and Usage\n\n### Docker\n\nWith `docker run` command :\n```shell\ndocker run -d \\\n  -e SCW_SECRET_KEY=\"super-secret-from-scaleway\" \\\n  -e IDLE_MINUTES=\"10\" \\\n  -e DOMAIN_LIST=\"myfirstdomain.com,anotherone.com\" \\\n  -e ENABLE_IPV4=\"true\" \\\n  -e ENABLE_IPV6=\"false\" \\\n  d1ceward/scaleway-ddns:latest\n```\n\nWith docker-compose file :\n```yaml\n---\nservices:\n  scaleway_ddns:\n    image: d1ceward/scaleway-ddns:latest\n    restart: unless-stopped\n    environment:\n      SCW_SECRET_KEY: super-secret-from-scaleway\n      IDLE_MINUTES: 10\n      DOMAIN_LIST: myfirstdomain.com,anotherone.com\n      ENABLE_IPV4: true # Optional, enables IPv4 address updates (default: true)\n      ENABLE_IPV6: true # Optional, enables IPv6 address updates (default: false)\n```\n\n### Linux\n\nDownload the executable file :\n```shell\nwget --no-verbose -O scaleway-ddns https://github.com/d1ceward/scaleway-ddns/releases/download/v2.0.0/scaleway-ddns-linux-amd64\n```\n\nModify the executable's permissions :\n```shell\nchmod +x scaleway-ddns\n```\n\nExecution example :\n```shell\nscaleway-ddns run\n```\n\nDocumentation available here : https://d1ceward.github.io/scaleway-ddns/\n\n## Contributing\n\nBug reports and pull requests are welcome on GitHub at https://github.com/d1ceward/scaleway-ddns. By contributing you agree to abide by the Code of Merit.\n\n1. Fork it (<https://github.com/d1ceward/scaleway-ddns/fork>)\n2. Create your feature branch (`git checkout -b my-new-feature`)\n3. Commit your changes (`git commit -am 'Add some feature'`)\n4. Push to the branch (`git push origin my-new-feature`)\n5. Create a new Pull Request\n\n## Development building and running\n\n1. Install corresponding version of Crystal lang (cf: `.crystal-version` file)\n2. Install Crystal dependencies with `shards install`\n3. Build with `shards build`\n\nThe newly created binary should be at `bin/scaleway-ddns`\n\n### Running tests\n\n```shell\ncrystal spec\n```\n\n## Environment Variables\n\n- `SCW_SECRET_KEY` (**required**): Secret key from Scaleway required for IP update.\n- `IDLE_MINUTES`: Number of minutes of inactivity between IP checks (default: 60, min: 1, max: 1440).\n- `DOMAIN_LIST`: Comma-separated list of domains to update (e.g., `example.com,another.com`).\n- `ENABLE_IPV4`: Enables IPv4 address updates. Set to `false` to disable (default: `true`).\n- `ENABLE_IPV6`: Enables IPv6 address updates. Set to `true` to enable (default: `false`).\n\n## Contributors\n\n- [d1ceward](https://github.com/d1ceward) - creator and maintainer\n","program":{"html_id":"scaleway-ddns/toplevel","path":"toplevel.html","kind":"module","full_name":"Top Level Namespace","name":"Top Level Namespace","abstract":false,"locations":[],"repository_name":"scaleway-ddns","program":true,"enum":false,"alias":false,"const":false,"types":[{"html_id":"scaleway-ddns/ScalewayDDNS","path":"ScalewayDDNS.html","kind":"module","full_name":"ScalewayDDNS","name":"ScalewayDDNS","abstract":false,"locations":[{"filename":"src/scaleway_ddns/cli.cr","line_number":1,"url":null},{"filename":"src/scaleway_ddns/config.cr","line_number":1,"url":null},{"filename":"src/scaleway_ddns/errors.cr","line_number":1,"url":null},{"filename":"src/scaleway_ddns/ip.cr","line_number":1,"url":null},{"filename":"src/scaleway_ddns/request.cr","line_number":1,"url":null},{"filename":"src/scaleway_ddns/updater.cr","line_number":1,"url":null},{"filename":"src/version.cr","line_number":1,"url":null}],"repository_name":"scaleway-ddns","program":false,"enum":false,"alias":false,"const":false,"constants":[{"id":"VERSION","name":"VERSION","value":"\"2.0.0\""}],"types":[{"html_id":"scaleway-ddns/ScalewayDDNS/CLI","path":"ScalewayDDNS/CLI.html","kind":"class","full_name":"ScalewayDDNS::CLI","name":"CLI","abstract":false,"superclass":{"html_id":"scaleway-ddns/Reference","kind":"class","full_name":"Reference","name":"Reference"},"ancestors":[{"html_id":"scaleway-ddns/Reference","kind":"class","full_name":"Reference","name":"Reference"},{"html_id":"scaleway-ddns/Object","kind":"class","full_name":"Object","name":"Object"}],"locations":[{"filename":"src/scaleway_ddns/cli.cr","line_number":3,"url":null}],"repository_name":"scaleway-ddns","program":false,"enum":false,"alias":false,"const":false,"namespace":{"html_id":"scaleway-ddns/ScalewayDDNS","kind":"module","full_name":"ScalewayDDNS","name":"ScalewayDDNS"},"doc":"Handles command line interface interactions for the updater.","summary":"<p>Handles command line interface interactions for the updater.</p>","constructors":[{"html_id":"new-class-method","name":"new","abstract":false,"location":{"filename":"src/scaleway_ddns/cli.cr","line_number":7,"url":null},"def":{"name":"new","visibility":"Public","body":"_ = allocate\n_.initialize\nif _.responds_to?(:finalize)\n  ::GC.add_finalizer(_)\nend\n_\n"},"external_var":false}],"instance_methods":[{"html_id":"config:Config-instance-method","name":"config","abstract":false,"location":{"filename":"src/scaleway_ddns/cli.cr","line_number":4,"url":null},"def":{"name":"config","return_type":"Config","visibility":"Public","body":"@config"},"external_var":false},{"html_id":"config=(config:Config)-instance-method","name":"config=","abstract":false,"args":[{"name":"config","external_name":"config","restriction":"Config"}],"args_string":"(config : Config)","args_html":"(config : <a href=\"../ScalewayDDNS/Config.html\">Config</a>)","location":{"filename":"src/scaleway_ddns/cli.cr","line_number":4,"url":null},"def":{"name":"config=","args":[{"name":"config","external_name":"config","restriction":"Config"}],"visibility":"Public","body":"@config = config"},"external_var":false},{"html_id":"run_updater=(run_updater:Bool)-instance-method","name":"run_updater=","abstract":false,"args":[{"name":"run_updater","external_name":"run_updater","restriction":"Bool"}],"args_string":"(run_updater : Bool)","args_html":"(run_updater : Bool)","location":{"filename":"src/scaleway_ddns/cli.cr","line_number":5,"url":null},"def":{"name":"run_updater=","args":[{"name":"run_updater","external_name":"run_updater","restriction":"Bool"}],"visibility":"Public","body":"@run_updater = run_updater"},"external_var":false},{"html_id":"run_updater?:Bool-instance-method","name":"run_updater?","abstract":false,"location":{"filename":"src/scaleway_ddns/cli.cr","line_number":5,"url":null},"def":{"name":"run_updater?","return_type":"Bool","visibility":"Public","body":"@run_updater"},"external_var":false}]},{"html_id":"scaleway-ddns/ScalewayDDNS/Config","path":"ScalewayDDNS/Config.html","kind":"class","full_name":"ScalewayDDNS::Config","name":"Config","abstract":false,"superclass":{"html_id":"scaleway-ddns/Reference","kind":"class","full_name":"Reference","name":"Reference"},"ancestors":[{"html_id":"scaleway-ddns/Reference","kind":"class","full_name":"Reference","name":"Reference"},{"html_id":"scaleway-ddns/Object","kind":"class","full_name":"Object","name":"Object"}],"locations":[{"filename":"src/scaleway_ddns/config.cr","line_number":5,"url":null}],"repository_name":"scaleway-ddns","program":false,"enum":false,"alias":false,"const":false,"constants":[{"id":"FALSY_VALUES","name":"FALSY_VALUES","value":"[\"false\", \"n\", \"no\", \"0\", \"off\", \"disabled\", \"none\", \"null\", \"nil\", \"\", false, 0] of String | Bool | Int32","doc":"Falsy values for boolean environment parsing.","summary":"<p>Falsy values for boolean environment parsing.</p>"}],"namespace":{"html_id":"scaleway-ddns/ScalewayDDNS","kind":"module","full_name":"ScalewayDDNS","name":"ScalewayDDNS"},"doc":"Configuration for the Scaleway DDNS program.\n\nCan be loaded from environment variables and adjusted at runtime.","summary":"<p>Configuration for the Scaleway DDNS program.</p>","constructors":[{"html_id":"new-class-method","name":"new","doc":"Creates a new instance of `ScalewayDDNS::Config` based on environment variables.","summary":"<p>Creates a new instance of <code><a href=\"../ScalewayDDNS/Config.html\">ScalewayDDNS::Config</a></code> based on environment variables.</p>","abstract":false,"location":{"filename":"src/scaleway_ddns/config.cr","line_number":27,"url":null},"def":{"name":"new","visibility":"Public","body":"_ = allocate\n_.initialize\nif _.responds_to?(:finalize)\n  ::GC.add_finalizer(_)\nend\n_\n"},"external_var":false}],"instance_methods":[{"html_id":"domain_list:Array(String)-instance-method","name":"domain_list","doc":"List of domains whose address record needs to be updated.","summary":"<p>List of domains whose address record needs to be updated.</p>","abstract":false,"location":{"filename":"src/scaleway_ddns/config.cr","line_number":13,"url":null},"def":{"name":"domain_list","return_type":"Array(String)","visibility":"Public","body":"@domain_list"},"external_var":false},{"html_id":"domain_list=(domain_list:Array(String))-instance-method","name":"domain_list=","doc":"List of domains whose address record needs to be updated.","summary":"<p>List of domains whose address record needs to be updated.</p>","abstract":false,"args":[{"name":"domain_list","external_name":"domain_list","restriction":"Array(String)"}],"args_string":"(domain_list : Array(String))","args_html":"(domain_list : Array(String))","location":{"filename":"src/scaleway_ddns/config.cr","line_number":13,"url":null},"def":{"name":"domain_list=","args":[{"name":"domain_list","external_name":"domain_list","restriction":"Array(String)"}],"visibility":"Public","body":"@domain_list = domain_list"},"external_var":false},{"html_id":"enable_ipv4=(enable_ipv4:Bool)-instance-method","name":"enable_ipv4=","doc":"Enables IPv4 address updates.","summary":"<p>Enables IPv4 address updates.</p>","abstract":false,"args":[{"name":"enable_ipv4","external_name":"enable_ipv4","restriction":"Bool"}],"args_string":"(enable_ipv4 : Bool)","args_html":"(enable_ipv4 : Bool)","location":{"filename":"src/scaleway_ddns/config.cr","line_number":16,"url":null},"def":{"name":"enable_ipv4=","args":[{"name":"enable_ipv4","external_name":"enable_ipv4","restriction":"Bool"}],"visibility":"Public","body":"@enable_ipv4 = enable_ipv4"},"external_var":false},{"html_id":"enable_ipv4?:Bool-instance-method","name":"enable_ipv4?","doc":"Enables IPv4 address updates.","summary":"<p>Enables IPv4 address updates.</p>","abstract":false,"location":{"filename":"src/scaleway_ddns/config.cr","line_number":16,"url":null},"def":{"name":"enable_ipv4?","return_type":"Bool","visibility":"Public","body":"@enable_ipv4"},"external_var":false},{"html_id":"enable_ipv6=(enable_ipv6:Bool)-instance-method","name":"enable_ipv6=","doc":"Enables IPv6 address updates.","summary":"<p>Enables IPv6 address updates.</p>","abstract":false,"args":[{"name":"enable_ipv6","external_name":"enable_ipv6","restriction":"Bool"}],"args_string":"(enable_ipv6 : Bool)","args_html":"(enable_ipv6 : Bool)","location":{"filename":"src/scaleway_ddns/config.cr","line_number":19,"url":null},"def":{"name":"enable_ipv6=","args":[{"name":"enable_ipv6","external_name":"enable_ipv6","restriction":"Bool"}],"visibility":"Public","body":"@enable_ipv6 = enable_ipv6"},"external_var":false},{"html_id":"enable_ipv6?:Bool-instance-method","name":"enable_ipv6?","doc":"Enables IPv6 address updates.","summary":"<p>Enables IPv6 address updates.</p>","abstract":false,"location":{"filename":"src/scaleway_ddns/config.cr","line_number":19,"url":null},"def":{"name":"enable_ipv6?","return_type":"Bool","visibility":"Public","body":"@enable_ipv6"},"external_var":false},{"html_id":"idle_minutes:Int32-instance-method","name":"idle_minutes","doc":"Number of minutes of inactivity between IP checks.","summary":"<p>Number of minutes of inactivity between IP checks.</p>","abstract":false,"location":{"filename":"src/scaleway_ddns/config.cr","line_number":10,"url":null},"def":{"name":"idle_minutes","return_type":"Int32","visibility":"Public","body":"@idle_minutes"},"external_var":false},{"html_id":"idle_minutes=(idle_minutes:Int32)-instance-method","name":"idle_minutes=","doc":"Number of minutes of inactivity between IP checks.","summary":"<p>Number of minutes of inactivity between IP checks.</p>","abstract":false,"args":[{"name":"idle_minutes","external_name":"idle_minutes","restriction":"Int32"}],"args_string":"(idle_minutes : Int32)","args_html":"(idle_minutes : Int32)","location":{"filename":"src/scaleway_ddns/config.cr","line_number":10,"url":null},"def":{"name":"idle_minutes=","args":[{"name":"idle_minutes","external_name":"idle_minutes","restriction":"Int32"}],"visibility":"Public","body":"@idle_minutes = idle_minutes"},"external_var":false},{"html_id":"scw_secret_key:String-instance-method","name":"scw_secret_key","doc":"Secret key from Scaleway required for IP update.","summary":"<p>Secret key from Scaleway required for IP update.</p>","abstract":false,"location":{"filename":"src/scaleway_ddns/config.cr","line_number":7,"url":null},"def":{"name":"scw_secret_key","return_type":"String","visibility":"Public","body":"@scw_secret_key"},"external_var":false},{"html_id":"scw_secret_key=(scw_secret_key:String)-instance-method","name":"scw_secret_key=","doc":"Secret key from Scaleway required for IP update.","summary":"<p>Secret key from Scaleway required for IP update.</p>","abstract":false,"args":[{"name":"scw_secret_key","external_name":"scw_secret_key","restriction":"String"}],"args_string":"(scw_secret_key : String)","args_html":"(scw_secret_key : String)","location":{"filename":"src/scaleway_ddns/config.cr","line_number":7,"url":null},"def":{"name":"scw_secret_key=","args":[{"name":"scw_secret_key","external_name":"scw_secret_key","restriction":"String"}],"visibility":"Public","body":"@scw_secret_key = scw_secret_key"},"external_var":false}]},{"html_id":"scaleway-ddns/ScalewayDDNS/GlobalError","path":"ScalewayDDNS/GlobalError.html","kind":"class","full_name":"ScalewayDDNS::GlobalError","name":"GlobalError","abstract":false,"superclass":{"html_id":"scaleway-ddns/Exception","kind":"class","full_name":"Exception","name":"Exception"},"ancestors":[{"html_id":"scaleway-ddns/Exception","kind":"class","full_name":"Exception","name":"Exception"},{"html_id":"scaleway-ddns/Reference","kind":"class","full_name":"Reference","name":"Reference"},{"html_id":"scaleway-ddns/Object","kind":"class","full_name":"Object","name":"Object"}],"locations":[{"filename":"src/scaleway_ddns/errors.cr","line_number":2,"url":null}],"repository_name":"scaleway-ddns","program":false,"enum":false,"alias":false,"const":false,"namespace":{"html_id":"scaleway-ddns/ScalewayDDNS","kind":"module","full_name":"ScalewayDDNS","name":"ScalewayDDNS"}},{"html_id":"scaleway-ddns/ScalewayDDNS/IP","path":"ScalewayDDNS/IP.html","kind":"class","full_name":"ScalewayDDNS::IP","name":"IP","abstract":false,"superclass":{"html_id":"scaleway-ddns/Reference","kind":"class","full_name":"Reference","name":"Reference"},"ancestors":[{"html_id":"scaleway-ddns/Reference","kind":"class","full_name":"Reference","name":"Reference"},{"html_id":"scaleway-ddns/Object","kind":"class","full_name":"Object","name":"Object"}],"locations":[{"filename":"src/scaleway_ddns/ip.cr","line_number":3,"url":null}],"repository_name":"scaleway-ddns","program":false,"enum":false,"alias":false,"const":false,"constants":[{"id":"IP_API_HOST_V4","name":"IP_API_HOST_V4","value":"\"api.ipify.org\""},{"id":"IP_API_HOST_V6","name":"IP_API_HOST_V6","value":"\"api6.ipify.org\""}],"namespace":{"html_id":"scaleway-ddns/ScalewayDDNS","kind":"module","full_name":"ScalewayDDNS","name":"ScalewayDDNS"},"doc":"The IP class provides methods to retrieve the current external IP address using an API.","summary":"<p>The IP class provides methods to retrieve the current external IP address using an API.</p>","class_methods":[{"html_id":"current_ips(ipv4:Bool=true,ipv6:Bool=false):Hash(String,String)-class-method","name":"current_ips","doc":"Returns a hash of enabled IP versions and their addresses, e.g. {\"ipv4\" => \"1.2.3.4\", \"ipv6\" => \"::1\"}","summary":"<p>Returns a hash of enabled IP versions and their addresses, e.g.</p>","abstract":false,"args":[{"name":"ipv4","default_value":"true","external_name":"ipv4","restriction":"Bool"},{"name":"ipv6","default_value":"false","external_name":"ipv6","restriction":"Bool"}],"args_string":"(ipv4 : Bool = true, ipv6 : Bool = false) : Hash(String, String)","args_html":"(ipv4 : Bool = <span class=\"n\">true</span>, ipv6 : Bool = <span class=\"n\">false</span>) : Hash(String, String)","location":{"filename":"src/scaleway_ddns/ip.cr","line_number":8,"url":null},"def":{"name":"current_ips","args":[{"name":"ipv4","default_value":"true","external_name":"ipv4","restriction":"Bool"},{"name":"ipv6","default_value":"false","external_name":"ipv6","restriction":"Bool"}],"return_type":"Hash(String, String)","visibility":"Public","body":"[{\"ipv4\", ipv4, false}, {\"ipv6\", ipv6, true}].select do |_, enabled, _| enabled end\n  .each_with_object({} of String => String) do |__temp_178, result|\n    label, _, v6 = __temp_178\n    begin\n      result[label] = current_ip(v6)\n    rescue IPError\n      Log.warn do \"Could not fetch #{label.upcase} address\" end\n    end\n  end"},"external_var":false}]},{"html_id":"scaleway-ddns/ScalewayDDNS/IPError","path":"ScalewayDDNS/IPError.html","kind":"class","full_name":"ScalewayDDNS::IPError","name":"IPError","abstract":false,"superclass":{"html_id":"scaleway-ddns/Exception","kind":"class","full_name":"Exception","name":"Exception"},"ancestors":[{"html_id":"scaleway-ddns/Exception","kind":"class","full_name":"Exception","name":"Exception"},{"html_id":"scaleway-ddns/Reference","kind":"class","full_name":"Reference","name":"Reference"},{"html_id":"scaleway-ddns/Object","kind":"class","full_name":"Object","name":"Object"}],"locations":[{"filename":"src/scaleway_ddns/errors.cr","line_number":3,"url":null}],"repository_name":"scaleway-ddns","program":false,"enum":false,"alias":false,"const":false,"namespace":{"html_id":"scaleway-ddns/ScalewayDDNS","kind":"module","full_name":"ScalewayDDNS","name":"ScalewayDDNS"}},{"html_id":"scaleway-ddns/ScalewayDDNS/Request","path":"ScalewayDDNS/Request.html","kind":"class","full_name":"ScalewayDDNS::Request","name":"Request","abstract":false,"superclass":{"html_id":"scaleway-ddns/Reference","kind":"class","full_name":"Reference","name":"Reference"},"ancestors":[{"html_id":"scaleway-ddns/Reference","kind":"class","full_name":"Reference","name":"Reference"},{"html_id":"scaleway-ddns/Object","kind":"class","full_name":"Object","name":"Object"}],"locations":[{"filename":"src/scaleway_ddns/request.cr","line_number":3,"url":null}],"repository_name":"scaleway-ddns","program":false,"enum":false,"alias":false,"const":false,"constants":[{"id":"SCW_API_HOST","name":"SCW_API_HOST","value":"\"api.scaleway.com\"","doc":"The host of the Scaleway API used for DNS record management.","summary":"<p>The host of the Scaleway API used for DNS record management.</p>"}],"namespace":{"html_id":"scaleway-ddns/ScalewayDDNS","kind":"module","full_name":"ScalewayDDNS","name":"ScalewayDDNS"},"doc":"The Request class handles interactions with the Scaleway API for managing DNS records.","summary":"<p>The Request class handles interactions with the Scaleway API for managing DNS records.</p>","constructors":[{"html_id":"new(scw_secret_key:String)-class-method","name":"new","doc":"Creates a new instance of `ScalewayDDNS::Request` with given Scaleway secret key.","summary":"<p>Creates a new instance of <code><a href=\"../ScalewayDDNS/Request.html\">ScalewayDDNS::Request</a></code> with given Scaleway secret key.</p>","abstract":false,"args":[{"name":"scw_secret_key","external_name":"scw_secret_key","restriction":"String"}],"args_string":"(scw_secret_key : String)","args_html":"(scw_secret_key : String)","location":{"filename":"src/scaleway_ddns/request.cr","line_number":8,"url":null},"def":{"name":"new","args":[{"name":"scw_secret_key","external_name":"scw_secret_key","restriction":"String"}],"visibility":"Public","body":"_ = allocate\n_.initialize(scw_secret_key)\nif _.responds_to?(:finalize)\n  ::GC.add_finalizer(_)\nend\n_\n"},"external_var":false}],"instance_methods":[{"html_id":"address_record_list(domain:String):Array(Hash(Symbol,String|Int32))-instance-method","name":"address_record_list","doc":"Get a list of A (address) record from the Scaleway API for a given domain.\n\n```\nScalewayDDNS::Request.address_record_list(\"example.com\")\n# => [{ :id => 1, :name => \"\" :ttl => 60 }, { :id => 2, :name => \"mail\" :ttl => 120 }]\n\nScalewayDDNS::Request.address_record_list(\"invalid.com\")\n# => Scaleway API: Unauthorized, please check configuration variables.\n```","summary":"<p>Get a list of A (address) record from the Scaleway API for a given domain.</p>","abstract":false,"args":[{"name":"domain","external_name":"domain","restriction":"String"}],"args_string":"(domain : String) : Array(Hash(Symbol, String | Int32))","args_html":"(domain : String) : Array(Hash(Symbol, String | Int32))","location":{"filename":"src/scaleway_ddns/request.cr","line_number":19,"url":null},"def":{"name":"address_record_list","args":[{"name":"domain","external_name":"domain","restriction":"String"}],"return_type":"Array(Hash(Symbol, String | Int32))","visibility":"Public","body":"Log.info do \"Scaleway API: Getting A record for #{domain}\" end\n\n\nresponse = execute_request(\"GET\", \"/domain/v2beta1/dns-zones/#{domain}/records?type=A\")\nrecords = (parse_response(response))[\"records\"]?.try(&.as_a?) || ([] of Hash(String, JSON::Any))\n\n\nrecords.map do |record|\n  {:id => record[\"id\"]?.to_s, :data => record[\"data\"]?.to_s, :name => record[\"name\"]?.to_s, :ttl => record[\"ttl\"]?.try(&.as_i) || 60}\nend\n"},"external_var":false},{"html_id":"update_address_record(domain:String,ip:String,record:Hash(Symbol,String|Int32))-instance-method","name":"update_address_record","doc":"Update an A (address) record in the Scaleway API for a given domain.\n\n```\nScalewayDDNS::Request.update_address_record(\"example.com\", \"127.0.0.1\", record)\n```","summary":"<p>Update an A (address) record in the Scaleway API for a given domain.</p>","abstract":false,"args":[{"name":"domain","external_name":"domain","restriction":"String"},{"name":"ip","external_name":"ip","restriction":"String"},{"name":"record","external_name":"record","restriction":"Hash(Symbol, String | Int32)"}],"args_string":"(domain : String, ip : String, record : Hash(Symbol, String | Int32))","args_html":"(domain : String, ip : String, record : Hash(Symbol, String | Int32))","location":{"filename":"src/scaleway_ddns/request.cr","line_number":42,"url":null},"def":{"name":"update_address_record","args":[{"name":"domain","external_name":"domain","restriction":"String"},{"name":"ip","external_name":"ip","restriction":"String"},{"name":"record","external_name":"record","restriction":"Hash(Symbol, String | Int32)"}],"visibility":"Public","body":"Log.info do \"Scaleway API: Updating A record for #{domain}\" end\n\n\nbody_string = {\n  changes: [{\n    set: {\n      id: \"#{record[:id]}\",\n      records: [{\n        data: \"#{ip}\",\n        name: \"#{record[:name]}\",\n        ttl: \"#{record[:ttl]}\",\n        type: \"A\",\n      }],\n    },\n  }],\n}.to_json\n\n\nparse_response(execute_request(\"PATCH\", \"/domain/v2beta1/dns-zones/#{domain}/records\", body_string))\n"},"external_var":false}]},{"html_id":"scaleway-ddns/ScalewayDDNS/RequestError","path":"ScalewayDDNS/RequestError.html","kind":"class","full_name":"ScalewayDDNS::RequestError","name":"RequestError","abstract":false,"superclass":{"html_id":"scaleway-ddns/Exception","kind":"class","full_name":"Exception","name":"Exception"},"ancestors":[{"html_id":"scaleway-ddns/Exception","kind":"class","full_name":"Exception","name":"Exception"},{"html_id":"scaleway-ddns/Reference","kind":"class","full_name":"Reference","name":"Reference"},{"html_id":"scaleway-ddns/Object","kind":"class","full_name":"Object","name":"Object"}],"locations":[{"filename":"src/scaleway_ddns/errors.cr","line_number":6,"url":null}],"repository_name":"scaleway-ddns","program":false,"enum":false,"alias":false,"const":false,"namespace":{"html_id":"scaleway-ddns/ScalewayDDNS","kind":"module","full_name":"ScalewayDDNS","name":"ScalewayDDNS"},"doc":"Raised when the Scaleway API returns an error.","summary":"<p>Raised when the Scaleway API returns an error.</p>","constructors":[{"html_id":"new(http_status:Int32)-class-method","name":"new","abstract":false,"args":[{"name":"http_status","external_name":"http_status","restriction":"Int32"}],"args_string":"(http_status : Int32)","args_html":"(http_status : Int32)","location":{"filename":"src/scaleway_ddns/errors.cr","line_number":7,"url":null},"def":{"name":"new","args":[{"name":"http_status","external_name":"http_status","restriction":"Int32"}],"visibility":"Public","body":"_ = allocate\n_.initialize(http_status)\nif _.responds_to?(:finalize)\n  ::GC.add_finalizer(_)\nend\n_\n"},"external_var":false}]},{"html_id":"scaleway-ddns/ScalewayDDNS/Updater","path":"ScalewayDDNS/Updater.html","kind":"class","full_name":"ScalewayDDNS::Updater","name":"Updater","abstract":false,"superclass":{"html_id":"scaleway-ddns/Reference","kind":"class","full_name":"Reference","name":"Reference"},"ancestors":[{"html_id":"scaleway-ddns/Reference","kind":"class","full_name":"Reference","name":"Reference"},{"html_id":"scaleway-ddns/Object","kind":"class","full_name":"Object","name":"Object"}],"locations":[{"filename":"src/scaleway_ddns/updater.cr","line_number":3,"url":null}],"repository_name":"scaleway-ddns","program":false,"enum":false,"alias":false,"const":false,"namespace":{"html_id":"scaleway-ddns/ScalewayDDNS","kind":"module","full_name":"ScalewayDDNS","name":"ScalewayDDNS"},"doc":"The Updater class handles the actual DDNS update process.","summary":"<p>The Updater class handles the actual DDNS update process.</p>","constructors":[{"html_id":"new(config:Config)-class-method","name":"new","abstract":false,"args":[{"name":"config","external_name":"config","restriction":"Config"}],"args_string":"(config : Config)","args_html":"(config : <a href=\"../ScalewayDDNS/Config.html\">Config</a>)","location":{"filename":"src/scaleway_ddns/updater.cr","line_number":4,"url":null},"def":{"name":"new","args":[{"name":"config","external_name":"config","restriction":"Config"}],"visibility":"Public","body":"_ = allocate\n_.initialize(config)\nif _.responds_to?(:finalize)\n  ::GC.add_finalizer(_)\nend\n_\n"},"external_var":false}],"instance_methods":[{"html_id":"run-instance-method","name":"run","doc":"Initiates the DNS update process and continuously updates the DNS records based on the configured interval.","summary":"<p>Initiates the DNS update process and continuously updates the DNS records based on the configured interval.</p>","abstract":false,"location":{"filename":"src/scaleway_ddns/updater.cr","line_number":9,"url":null},"def":{"name":"run","visibility":"Public","body":"begin\n  raise_if_domain_list_empty\n\n  loop do\n    Log.info do \"Starting DNS update...\" end\n    update_all_domains\n    Log.info do \"DNS update finished, sleeping...\" end\n    sleep(@config.idle_minutes.minutes)\n  end\nrescue exception : GlobalError\n  Log.error do exception.message end\n  Log.info do \"Exiting...\" end\n  exit(1)\nend"},"external_var":false}]}]}]}})